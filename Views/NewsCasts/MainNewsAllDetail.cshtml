@model IEnumerable<object>

@{
    ViewBag.Title = "MainNewsAllDetail";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<style>
    /* Card Styling */
    .card {
        margin-top: 15px;
        transition: transform 0.3s, box-shadow 0.3s;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        border-radius: 20px;
    }

        .card:hover {
            transform: scale(1.03);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
        }

    /* Source Box Styling */
    .source-box {
        padding: 10px;
        border: solid black 1px;
        border-radius: 10px;
        display: inline-block;
    }
    .btn{
        
        color:black;
    }
</style>

<div class="container" style="max-width: 800px; margin-bottom:70px;">
    @foreach (var item in Model)
    {
        var Title = item.GetType().GetProperty("Title").GetValue(item, null);
        var Text = item.GetType().GetProperty("Text").GetValue(item, null);
        var MultimediaUrl = item.GetType().GetProperty("MultimediaUrl").GetValue(item, null);
        var Comments = item.GetType().GetProperty("Comments").GetValue(item, null);
        var NewsCategoryId = item.GetType().GetProperty("NewsCategoryId").GetValue(item, null);
        var CorpationName = item.GetType().GetProperty("CorpationName").GetValue(item, null);
        var NewsCastId = item.GetType().GetProperty("NewsCastId").GetValue(item, null);
        var NewsSourceId = item.GetType().GetProperty("NewsSourceId").GetValue(item, null);

        <div class="card">
            <img src="~/Images/NewsImages/@MultimediaUrl" style="height:350px;border-radius:20px 20px 0 0; object-fit: cover;" class="card-img-top" alt="MultimediaUrl">
            <div class="card-body">
                <h4 class="card-title" style="color:black;">@Title</h4>
                <p class="card-text" style="color:black;">@Text</p>

                <!-- Source Box -->
                <div class="source-box">
                    <h5 style="color:black;"><b>Source</b></h5>
                    <span>@CorpationName</span>
                </div>

                <hr />
                <h5><b>Comments</b></h5>
                @if (Comments != null)
                {
                    foreach (var comment in (IEnumerable<object>)Comments)
                    {
                        var Comment = comment.GetType().GetProperty("Comment").GetValue(comment, null);
                        var CommentUserName = comment.GetType().GetProperty("UserName").GetValue(comment, null);
                        <p><b>@CommentUserName</b>@Comment</p>
                    }
                }

                <!-- Comment Form -->
                <form action="~/NewsComments/UserAddNewsComment" method="post" class="mb-2">
                    <div class="row">
                        <div class="col-9 mb-2">
                            <input type="text" name="Comment" class="form-control" placeholder="Your Comments Here"/>
                        </div>
                        <div class="col-3">
                            <button class="btn w-100" type="submit" style="background-color:mediumpurple; color:white;">Comment</button>
                        </div>
                    </div>
                    <input type="hidden" name="NewsCastId" value="@NewsCastId" />
                </form>

                <form action="/NewsShares/ShareToUser" method="post" class="mb-2">
                    <div class="row">
                        <div class="col-9 mb-2">
                            <input type="email" name="Email" class="form-control" placeholder="Enter email" />
                        </div>
                        <div class="col-3">
                            <input type="hidden" name="NewsCastId" value="@NewsCastId" />
                            <button class="btn w-100" type="submit" style="background-color:mediumpurple; color:white;">Share</button>
                        </div>
                    </div>
                </form>

                <!-- Favorite, Subscribe, Tweet Buttons -->
                <form method="post" action="/NewsCasts/SendTweet" class="mb-2">
                    <input type="hidden" name="NewsCastId" value="@NewsCastId" />
                    <button class="btn w-100" type="submit" style="background-color:mediumpurple; color:white;">Send</button>
                </form>
                <form method="post" action="/NewsFavs/UserFavAdd" class="mb-2">
                    <input type="hidden" name="NewsCastId" value="@NewsCastId" />
                    <button class="btn w-100" type="submit" style="background-color:mediumpurple; color:white;">Add to Favorites</button>
                </form>
                <form method="post" action="/NewsSubscribers/UserAddSubs" class="mb-2">
                    <input type="hidden" name="NewsSourceId" value="@NewsSourceId" />
                    <button class="btn w-100" type="submit" style="background-color:mediumpurple; color:white;">Subscribe to Source</button>
                </form>
            </div>
        </div>
    }
</div>
