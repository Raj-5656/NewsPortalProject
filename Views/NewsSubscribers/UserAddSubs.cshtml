@model IEnumerable<object>
@{
    ViewBag.Title = "UserAddSubs";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@{
    string previousCorporationName = null;
}
<style>
    /* Add hover effect to the card */
    .card:hover {
        box-shadow: 0 8px 16px 0 rgba(0,0,0,0.2); /* Add a shadow on hover */
        transform: scale(1.05); /* Scale up the card slightly on hover */
    }

    /* Ensure all cards have the same size */
    .card {
        height: 100px; /* This ensures that all cards have the same height */
    }

    /* Add border-radius to the top of the card image */
    .card-img-top {
        border-top-left-radius: 15px;
        border-top-right-radius: 15px;
        object-fit: cover;
        height: 250px
    }
    .corp-name{
        color:mediumpurple;
    }
</style>


<!-- List of Subscribed Corporations -->
<ul class="list-group mb-4">
    @foreach (var item in Model)
    {
        var CorporationName = item.GetType().GetProperty("CorpationName").GetValue(item, null) as string;
        var NewsSourceId = item.GetType().GetProperty("NewsSourceId").GetValue(item, null);

        if (previousCorporationName != CorporationName)
        {
            <li class="list-group-item d-flex justify-content-between align-items-center">
                @CorporationName
                <form method="post" action="/NewsSubscribers/UserDelSubs">
                    <input type="hidden" name="NewsSourceId" value="@NewsSourceId" />
                    <button type="submit" class="btn" style="background-color:mediumpurple; color:white;">Unsubscribe!</button>
                </form>
            </li>
        }

        previousCorporationName = CorporationName;
    }
</ul>

<!-- News Cards -->
<div class="container-fluid">
    <div class="row" style="margin-bottom: 70px;">
        @foreach (var item in Model)
        {
            var Title = item.GetType().GetProperty("Title").GetValue(item, null);
            var Text = item.GetType().GetProperty("Text").GetValue(item, null);
            var NewsCastId = item.GetType().GetProperty("NewsCastId").GetValue(item, null);
            var MultimediaUrl = item.GetType().GetProperty("MultimediaUrl").GetValue(item, null);
            var NewsCategoryId = item.GetType().GetProperty("NewsCategoryId").GetValue(item, null);
            var CorporationName = item.GetType().GetProperty("CorpationName").GetValue(item, null);
            var NewsSourceId = item.GetType().GetProperty("NewsSourceId").GetValue(item, null);

            <div class="col-6 mb-4" style="width:450px; height:500px; margin-left:60px; margin-right:20px;" >
                <div class="card h-100 rounded" style=" margin-top:15px; transition: transform 0.3s ease-in-out;">
                    <img src="~/Images/NewsImages/@MultimediaUrl" class="card-img-top rounded-top img-fluid" alt="MultimediaUrl" style="height: 260px; object-fit: cover; border-top-left-radius: 10px; border-top-right-radius: 10px;">
                    <div class="card-body">
                        <h4 class="card-title" style="color:black;">@Title</h4>
                        
                        <form method="post" action="/NewsCasts/MainNewsAllDetail">
                            <input type="hidden" name="NewsCastId" value="@NewsCastId" />
                            <button class="btn" type="submit" style="background-color:mediumpurple; color:white; width:100%; margin-top:15px;">Go Details, Comments and Shares</button>
                        </form>
                        <br />
                        
                        <div>
                            <form method="post" action="/NewsSubscribers/UserDelSubs">
                                <input type="hidden" name="NewsSourceId" value="@NewsSourceId" />
                                
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        }
    </div>
</div>

